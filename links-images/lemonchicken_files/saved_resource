/*! For license information please see wrapper.full.a357769c86bfc5bffedf.min.js.LICENSE.txt */
(()=>{var e,t,n={799:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});const i=new class{constructor(){this.queue={},this.$element=document.createElement("template")}send(e,t){e in this.queue||(this.queue[e]=[]),this.queue[e].push({name:e,data:t}),this.$element.dispatchEvent(new CustomEvent(e,{detail:t}))}listen(e,t){e in this.queue&&this.queue[e].forEach((function(e){t(e.data)})),this.$element.addEventListener(e,(function(e){t(e.detail)}))}};var r=function(){var e={a:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"bⓑｂḃḅḇƀƃɓ",c:"cⓒｃćĉċčçḉƈȼꜿↄ",d:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ",dz:"ǳǆ",e:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ",f:"fⓕｆḟƒꝼ",g:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ",h:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ",hv:"ƕ",i:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı",j:"jⓙｊĵǰɉ",k:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ",l:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ",lj:"ǉ",m:"mⓜｍḿṁṃɱɯ",n:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ",nj:"ǌ",o:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ",oi:"ƣ",ou:"ȣ",oo:"ꝏ",p:"pⓟｐṕṗƥᵽꝑꝓꝕ",q:"qⓠｑɋꝗꝙ",r:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ",s:"sⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛ",ss:"ß",t:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ",tz:"ꜩ",u:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ",v:"vⓥｖṽṿʋꝟʌ",vy:"ꝡ",w:"wⓦｗẁẃŵẇẅẘẉⱳ",x:"xⓧｘẋẍ",y:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ",z:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"},t={};for(var n in e)for(var i=e[n].split(""),r=0;r<i.length;++r)t[i[r]]=n;return t}();let o={minLength:2,substrings:!0,normalize:function(e){return function(e){for(var t=e.split(""),n="",i=0;i<t.length;++i){var o=t[i];n+=o in r?r[o]:o}return n}(e.toLowerCase())},split:function(e){return e.split(/[-\s,;:\.\/\\\{\}\[\]\(\)<>|!\?"'^#\+~\*\$%`´&§=@€»«¢„“”]+/)}};const s=new class{constructor(e){this.options=o,this.WINNING_THRESHOLD=.3}find_most_similar_sentence(e,t=this.WINNING_THRESHOLD){const n=this;let i=0,r=null,o=null;const s=Object.keys(this.sentences);for(let t of s){let s=n.dice_coefficient(e,t);s>i&&(i=s,o=t,r=Object.keys(n.sentences[t])[0])}return r&&i>t?[r]:[]}dice_coefficient(e,t){var n,i,r,o,s,a,c,l;if(e.length<2||t.length<2)return 0;for(o=new Map,n=i=0,a=e.length-2;0<=a?i<=a:i>=a;n=0<=a?++i:--i)l=e.substr(n,2),o.has(l)?o.set(l,o.get(l)+1):o.set(l,1);for(s=0,n=r=0,c=t.length-2;0<=c?r<=c:r>=c;n=0<=c?++r:--r)l=t.substr(n,2),o.get(l)>0&&(s++,o.set(l,o.get(l)-1));return 2*s/(e.length+t.length-2)}find(e){var t=this.wordsOf(e);if(0===t.length)return[];t.sort((function(e,t){return t.length-e.length}));var n=this.index,i=Object.prototype.hasOwnProperty,r=t[0];if(!i.call(n,r))return[];var o={};for(var s in n[r])o[s]=!0;for(var a=1;a<t.length;++a){r=t[a];if(!i.call(n,r))return[];var c=n[r];for(var s in o)i.call(c,s)||delete o[s]}return Object.keys(o)}add(e,t){var n=this.options.substrings?this.substringsOf(t):this.wordsOf(t);if(0===n.length)return!1;var i=Object.prototype.hasOwnProperty;if(t.length<=100){var r=this.sentences;(i.call(r,t)?r[t]:r[t]={})[e]=!0}for(var o=this.index,s=0;s<n.length;++s){var a=n[s];(i.call(o,a)?o[a]:o[a]={})[e]=!0}return!0}remove(e){var t=this.index;for(var n in t)delete t[n][e]}clear(){this.index={}}wordsOf(e){var t=e.trim();if(!t)return[];var n=this.options.minLength,i={},r=Object.prototype.hasOwnProperty;return this.options.split(this.options.normalize(t)).filter((function(e){return!(e.length<n||r.call(i,e))&&(i[e]=!0,!0)}))}substringsOf(e){for(var t=this.options.minLength,n=(Object.prototype.hasOwnProperty,this.wordsOf(e)),i={},r=0;r<n.length;++r)for(var o=n[r],s=o.length,a=s;a>=t;--a)for(var c=0,l=s-a;c<=l;++c)i[o.slice(c,c+a)]=!0;return Object.keys(i)}toJSON(){var e={},t=this.index;for(var n in t)e[n]=Object.keys(t[n]);return e}toString(){return JSON.stringify(this.toJSON())}dump(){return this.toString()}load(e){var t=e,n={};if("object"!=typeof t||null===t)throw new TypeError("invalid JSON data");for(var e in t){var i=t[e];if(!Array.isArray(i))throw new TypeError("invalid JSON data");for(var r={},o=0;o<i.length;++o){var s=i[o];if("string"!=typeof s)throw new TypeError("invalid JSON data");r[s]=!0}n[e]=r}this.index=n,this.sentences={}}};window.Promise.prototype.done=function(){this.catch((function(e){throw u.log(e),e}))};var a=n(743);a.init({token:"e6d3166d-96cb-4e5d-8a52-da09bbede5e8",region:"eu"});var c=n(180);class l{constructor(e=[]){this.elements=e,this.viewListeners=[]}static select(e,t){return Array.from(e.querySelectorAll(t))}get length(){return this.elements.length}hide(){this.css("display","none")}show(){this.css("display","auto")}viewable(){let e=this.elements.filter((function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0}));return new l(e)}first(){return new l(this.elements.slice(0,1))}last(){return new l(this.elements.slice(-1))}parent(){let e=[];return this.elements.forEach((function(t){e=e.concat(t.parentElement)})),new l(e)}children(){let e=[];return this.elements.forEach((function(t){e=e.concat([].slice.call(t.children))})),new l(e)}find(e){let t=[];return this.elements.forEach((function(n){t=t.concat(l.select(n,e))})),new l(t)}width(){let e=this.elements.slice(0,1).pop();return e?e.getBoundingClientRect().width:0}height(){let e=this.elements.slice(0,1).pop();return e?e.getBoundingClientRect().height:0}css(e,t){if(void 0===t){let t=this.elements.slice(0,1).pop();return t?t.style[e]:null}return this.elements.forEach((function(n){n.style[e]=t})),this}attr(e,t){if(void 0===t){let t=this.elements.slice(0,1).pop();return t?t.getAttribute(e):null}return this.elements.forEach((function(n){t&&n.setAttribute(e,t)})),this}each(e){return this.elements.forEach(e),this}on(e,t,{once:n=!0,threshold:i=.5}={}){return this.elements.forEach((r=>{if("view"===e){const e=new IntersectionObserver((i=>{i[0].isIntersecting&&(t(),n&&e.unobserve(r))}),{threshold:i});this.viewListeners.push(e),e.observe(r)}r.addEventListener(e,t,!1)})),this}disconnectListeners(){return this.viewListeners.forEach((e=>{e.disconnect()})),this}append(e){return this.elements.forEach((function(t){e.each((function(e){t.appendChild(e)}))})),this}after(e){return this.elements.forEach((function(t){e.each((function(e){t.parentNode.insertBefore(e,t.nextSibling)}))})),this}remove(){return this.elements.forEach((function(e){e.remove()})),this}}let u=function(e){if(e instanceof String||"string"==typeof e){if((e=e.trim()).startsWith("<")&&e.endsWith(">")){let t=document.createElement("template");return t.innerHTML=e,new l([t.content.firstChild])}return new l(l.select(document,e))}if(e instanceof HTMLDocument)return new l([e.documentElement]);if(e instanceof Node)return new l([e]);if(void 0===e)return new l;throw TypeError("Chicory: selector should be of type String or Node")};u.ready=function(e,t){let n=e.bind(window,t);if("loading"!==document.readyState)return void n();let i=document.onreadystatechange;document.onreadystatechange=function(){"loading"!==document.readyState&&(n(),i&&i())}},u.log=function(e){console.log(e);try{let t={error:{name:e.name,message:e.message,stack:c.parse(e).map((function(e){return e.toString()}))},page:{url:window.location.href,hostname:window.location.hostname,referrer:window.document.referrer,language:window.navigator.language||navigator.userLanguage,encoding:window.document.characterSet||window.document.defaultCharset},ua:navigator.userAgent};a.error(t)}catch(e){console.log(e)}},u.params=function(e){let t,n={},i=/[?&;](.+?)=([^&;]+)/g;if(!e)return{};for(;t=i.exec(e);)n[t[1]]=t[2];return n},u.query=function(e){if(!e)return"";let t=Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");return t?"?"+t:""},u.get=function(e,t={},n={},i="json"){let r=new Request(e+u.query(t),u.extend({mode:"cors",credentials:"omit",redirect:"error",cache:"no-store"},n));return fetch(r).then((function(e){if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e[i]()}))},u.post=function(e,t={},n={},i="json"){let r={headers:{"Content-Type":"application/json"},method:"POST",body:t,mode:"cors",credentials:"omit",redirect:"error",cache:"no-store"},o=new Request(e,u.extend(r,n));return fetch(o).then((function(e){if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e[i]()}))},u.each=function(e,t){e instanceof Array?e.forEach((function(n,i){t.call(e,i,n)})):e instanceof Object&&Object.keys(e).forEach((function(n){t.call(e,n,e[n])}))},u.extend=function(){return Object.assign.apply(this,arguments)},u.sanitize=function(e){return(e=e.toString())&&""!==e?e.toLowerCase().replace(/[\r\n]+/g,"").replace(/\s+/g," ").replace(/^\s+|\s+$/,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\*/g,"").replace(/\u21b5/g,"").trim():e},u.fulltext=function(e,t,n,i=null){var r=new l,o={},a=s;if(a.load({}),e&&e.length>0){let t=0;e.elements.forEach((function(e){e&&function(e,t=0){let n=e;const i=[n];let r=0;for(;n=i.shift();){let e=t+"_"+r++;a.add(e,u.sanitize(n.textContent)),o[e]={element:n,type:n.tagName.toLowerCase()},Array.from(n.children).forEach((e=>{i.push(e)}))}}(e,t),t++}))}var c=u.sanitize(t),d=a.find(c);d.length<1&&(d=a.find(u.sanitize(n))).length<1&&(d=a.find_most_similar_sentence(c));var f=d[d.length-1];return f?(d.forEach((function(e){(i&&o[e].type===i||"li"===o[e].type)&&(f=e)})),o[f]&&(r=new l([o[f].element])),r):[]},u.getPageStructure=function(){let e={post:u(),recipe:u(),ingredients:u(),preps:u()};e.post=u(".entry-content, .post-content, .post_content, .post_article, .blog-yumprint-recipe, .recipe-single-instructions").viewable().first();let t=u(".wpurp-container").viewable().first();if(t.length)return e.recipe=t,e.ingredients=t.find(".wpurp-recipe-ingredients").viewable().first(),e.preps=t.find(".wpurp-recipe-instructions").viewable().first(),e;let n=u('[itemtype*="schema.org/Recipe"], #mpprecipe-ingredients-list').viewable().first();if(n.length&&!document.location.host.includes("halfbakedharvest"))return e.recipe=n,e.ingredients=n.find('[itemprop="ingredients"], [itemprop="recipeIngredient"]').viewable().parent().last(),e.preps=n.find("div#this_recipe > div.preps").viewable(),e;let i=u(".hrecipe").viewable().first();if(i.length)return e.recipe=i,e.ingredients=i.find(".ingredient").viewable().parent().last(),e;let r=u(".h-recipe").viewable().first();if(r.length)return e.recipe=r,e.ingredients=r.find(".p-ingredient").viewable().parent().last(),e.preps=r.find(".e-instructions").viewable(),e;let o=u(".recipe-single-container").viewable().last();if(o.length)return e.recipe=o,e.ingredients=o.find(".recipe-ingredients").viewable().first(),e.preps=o.find(".recipe-directions").viewable().first(),e;let s=u(".recipe-ingredients").viewable().first();if(s.length)return e.recipe=s,e.ingredients=s.find(".List").viewable(),e;let a=u(".tasty-recipes").viewable().first();if(a.length){e.recipe=a;let t=a.find(".tasty-recipe-ingredients").viewable().first();return t.elements.length?e.ingredients=t:e.ingredients=a.find(".tasty-recipes-ingredients").viewable().first(),e.preps=a.find(".tasty-recipe-instructions").viewable().first(),e}let c=u(".wprm-recipe-container").viewable().first();if(c.length)return e.recipe=c,e.ingredients=c.find(".wprm-recipe-ingredients-container").viewable().first(),e.preps=c.find(".wprm-recipe-instructions-container").viewable().first(),e;let l=u(".mv-recipe-card").viewable().first();if(l.length)return e.recipe=l,e.ingredients=l.find(".mv-create-ingredients").viewable().first(),e.preps=l.find(".mv-create-instructions").viewable().first(),e;let d=u(".rpr-ingredients-container").viewable().first();if(d.length)return e.recipe=d,e.ingredients=d.find(".rpr-ingredient-list").viewable().first(),e.preps=null,e;let f=u(".cooked-recipe-ingredients").viewable().first();if(f.length)return e.recipe=f,e.ingredients=f,e.preps=null,e;let p=u(".recipe-content").viewable().first();if(p.length)return e.recipe=p,e.ingredients=p.find(".ingredients-list").viewable().first(),e.ingredients.length||(e.ingredients=p.find(".ingredient-list").viewable().first()),e.preps=p.find(".directions-list").viewable().first(),e.preps.length||(e.preps=p.find(".numbered-direction-list").viewable().first()),e;let h=u(".Recipe").viewable().first();if(h.length)return e.recipe=h,e.ingredients=u(".Recipe__ingredientsGroups").viewable().first(),e.preps=u(".Recipe__instructionsGroup").viewable().first(),e;let g=u(".recipe-tabs").viewable().first();if(g.length)return e.recipe=g,e.ingredients=g.find(".ingredients-list").viewable().first(),e.ingredients.length||(e.ingredients=g.find(".recipe-list").viewable().first()),e.preps=g.find(".recipe-instructions").viewable().first(),e;let v=u(".recipe-container").viewable().first();if(v.length)return e.recipe=v,e.ingredients=v.find(".ingredients-body").viewable().first(),e.preps=v.find(".directions").viewable().first(),e;let m=u(".recipe__text").viewable().first();if(m.length)return e.recipe=m,e.ingredients=m.find(".recipe__list--ingredients").viewable().first(),e.preps=m.find("recipe__list--steps").viewable().first(),e;let y=u(".l-grid--content-body").viewable().first();if(y.length)return e.recipe=y,e.ingredients=y.find(".m-detail--ingredients").viewable().first(),e.preps=y.find(".m-detail--preparation").viewable().first(),e;let _=u(".recipe-list").first();if(_.length)return e.recipe=_,e.ingredients=_,e.preps=null,e;let w=u(".ccm-card").viewable().first();if(w.length)return e.recipe=w,e.ingredients=w.find(".ccm-section-ingredients").viewable().first(),e;const b=u(".wp-block-wpzoom-recipe-card-block-recipe-card").viewable().first();if(b.length)return e.recipe=b,e.ingredients=b.find(".recipe-card-ingredients").viewable().first(),e;const O=u(".o-Recipe .recipe-body").viewable().first();if(O.length)return e.recipe=O,e.ingredients=O.find(".o-Ingredients").viewable().first(),e.preps=O.find("o-Method").viewable().first(),e;const E=u("#recipe.recipe.layout").viewable().first();if(E.length)return e.recipe=E,e.ingredients=E.find(".ingredients").viewable().first(),e.preps=E.find("directions").viewable().first(),e;let k=u(".MuiBox-root .ingredients").viewable().first();if(k.length)return e.recipe=k,e.ingredients=k,e;let S=u("#recipe").viewable().first();return S.length?(e.recipe=S,e.ingredients=S.find("#recipe-ingredients").viewable().first(),e.preps=S.find("#recipe-preparation").viewable().first(),e):e},u.script=function(e){return new Promise((function(t,n){let i=document.createElement("script");return i.type="text/javascript",i.async=!0,i.src=e,i.onload=t,i.onerror=n,document.body.appendChild(i),i}))},u.listen=function(e,t){i.listen(e,t)},u.send=function(e,t){i.send(e,t)},u.is_valid_url=function(e){try{return new URL(e),!0}catch(e){return!1}},u.done=function(e){throw u.log(e),e};const d=u},180:function(e,t,n){var i,r,o;!function(s,a){"use strict";r=[n(829)],void 0===(o="function"==typeof(i=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),i=n.match(/ (\(.+\)$)/);n=i?n.replace(i[0],""):n;var r=this.extractLocation(i?i[1]:n),o=i&&n||void 0,s=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:o,fileName:s,lineNumber:r[1],columnNumber:r[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(i)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=t.match(n),r=i&&i[1]?i[1]:void 0,o=this.extractLocation(t.replace(n,""));return new e({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,i=t.message.split("\n"),r=[],o=2,s=i.length;o<s;o+=2){var a=n.exec(i[o]);a&&r.push(new e({fileName:a[2],lineNumber:a[1],source:i[o]}))}return r},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=t.stacktrace.split("\n"),r=[],o=0,s=i.length;o<s;o+=2){var a=n.exec(i[o]);a&&r.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:i[o]}))}return r},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,i=t.split("@"),r=this.extractLocation(i.pop()),o=i.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(n=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:s,args:a,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})}),this)}}})?i.apply(t,r):i)||(e.exports=o)}()},828:(e,t,n)=>{var i=n(799),r=n(672);void 0===r.dom&&(r.dom=i),e.exports=i},672:(e,t,n)=>{"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},743:function(e,t,n){var i,r;r=this,i=function(){return function(e){"use strict";var t=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},n=function(){return"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest};function i(i){var r,o=i.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,s=i.page_info,c=i.token,l=a(i.region),u=i.print,d=i.no_format,f="undefined"==typeof XDomainRequest?i.ssl:"https:"===e.location.protocol;r=(f?"https://":"http://")+l+(r=e.R7INSIGHTENDPOINT?e.R7INSIGHTENDPOINT:d?"webhook.logs.insight.rapid7.com/noformat":"js.logs.insight.rapid7.com/v1")+"/logs/"+c;var p=!0,h=[],g=!1,v=!1;if(i.catchall){var m=e.onerror,y=function(e,t,n){return b({error:e,line:n,location:t}).level("ERROR").send(),!!m&&m(e,t,n)};e.onerror=y}var _=function(){var t=e.navigator||{doNotTrack:void 0},n=e.screen||{};return{url:(e.location||{}).pathname,referrer:document.referrer,screen:{width:n.width,height:n.height},window:{width:e.innerWidth,height:e.innerHeight},browser:{name:t.appName,user_agent:t.userAgent,version:t.appVersion,cookie_enabled:t.cookieEnabled,do_not_track:t.doNotTrack},platform:t.platform}},w=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)throw new Error("No arguments!");return 1===e.length?e[0]:e},b=function(e){var n=w.apply(this,arguments),i={event:n};return"never"!==s&&(v&&"per-entry"!==s||(v=!0,void 0===n.screen&&void 0===n.browser&&b(_()).level("PAGE").send())),o&&(i.trace=o),{level:function(e){if(u&&"undefined"!=typeof console&&"PAGE"!==e){var n=null;"undefined"!=typeof XDomainRequest&&(n=i.trace+" "+i.event);try{console[e.toLowerCase()].call(console,n||i)}catch(e){console.log(n||i)}}return i.level=e,{send:function(){var e=[],n=JSON.stringify(i,(function(n,i){if(void 0===i)return"undefined";if("object"==typeof i&&null!==i){if(-1!==t(e,i))return"<?>";e.push(i)}return i}));g?h.push(n):O(c,n)}}}}};this.log=b;var O=function(e,t){g=!0;var i=n();p&&(i instanceof XMLHttpRequest?i.onreadystatechange=function(){4===i.readyState&&(i.status>=400?(console.error("Couldn't submit events."),410===i.status&&console.warn("This version of r7insight_js is no longer supported!")):(301===i.status&&console.warn("This version of r7insight_js is deprecated! Consider upgrading."),h.length>0?O(e,h.shift()):g=!1))}:i.onload=function(){h.length>0?O(e,h.shift()):g=!1},i.open("POST",r,!0),i.constructor===XMLHttpRequest&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/json")),i.overrideMimeType&&i.overrideMimeType("text"),i.send(t))}}function r(e){var t,n={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"!=typeof e)throw new Error("Invalid parameters for createLogStream()");for(var r in e)n[r]=e[r];if(null===n.token)throw new Error("Token not present.");if(null===n.region)throw new Error("Region is not present");t=new i(n);var o=function(e){if(t)return t.log.apply(this,arguments);throw new Error("You must call R7Insight.init(...) first.")};return{log:function(){o.apply(this,arguments).level("LOG").send()},warn:function(){o.apply(this,arguments).level("WARN").send()},error:function(){o.apply(this,arguments).level("ERROR").send()},info:function(){o.apply(this,arguments).level("INFO").send()}}}var o={},s=function(e){if("string"!=typeof e.name)throw new Error("Name not present.");return o.hasOwnProperty(e.name)||(o[e.name]=new r(e)),!0};return{init:function(e){var t={name:"default"};if("object"==typeof e)for(var n in e)t[n]=e[n];else{if("string"!=typeof e)throw new Error("Invalid parameters for init()");t.token=e}return s(t)},createLogStream:s,to:function(e){if(!o.hasOwnProperty(e))throw new Error("Invalid name for logStream");return o[e]},destroy:function(e){void 0===e&&(e="default"),delete o[e]},log:function(){for(var e in o)o[e].log.apply(this,arguments)},warn:function(){for(var e in o)o[e].warn.apply(this,arguments)},error:function(){for(var e in o)o[e].error.apply(this,arguments)},info:function(){for(var e in o)o[e].info.apply(this,arguments)}};function a(e){if(e){if("custom"===e)return"";if(["eu","us","us2","us3","ca","au","ap","custom"].indexOf(e)>-1)return e+".";throw"Unrecognised region"}throw"No region defined"}}(r)}.call(t,n,t,e),void 0===i||(e.exports=i)},829:function(e,t){var n,i,r;!function(o,s){"use strict";i=[],void 0===(r="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var i=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],o=["fileName","functionName","source"],s=["args"],a=["evalOrigin"],c=i.concat(r,o,s,a);function l(e){if(e)for(var n=0;n<c.length;n++)void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}l.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof l)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new l(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:i?i+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},l.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),i=e.substring(0,t),r=e.substring(t+1,n).split(","),o=e.substring(n+1);if(0===o.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),a=s[1],c=s[2],u=s[3];return new l({functionName:i,args:r||void 0,fileName:a,lineNumber:c||void 0,columnNumber:u||void 0})};for(var u=0;u<i.length;u++)l.prototype["get"+t(i[u])]=n(i[u]),l.prototype["set"+t(i[u])]=function(e){return function(t){this[e]=Boolean(t)}}(i[u]);for(var d=0;d<r.length;d++)l.prototype["get"+t(r[d])]=n(r[d]),l.prototype["set"+t(r[d])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(r[d]);for(var f=0;f<o.length;f++)l.prototype["get"+t(o[f])]=n(o[f]),l.prototype["set"+t(o[f])]=function(e){return function(t){this[e]=String(t)}}(o[f]);return l})?n.apply(t,i):n)||(e.exports=r)}()}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={exports:{}};return n[e].call(o.exports,o,o.exports,r),o.exports}r.m=n,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"chicory_print.27c5be8acfbef40ec6bd.min.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="Chicory:",r.l=(n,i,o,s)=>{if(e[n])e[n].push(i);else{var a,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[i];var f=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),t)return t(i)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://prod-cdn.chicoryapp.com/chicory-publisher-sdk/",(()=>{var e={33:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=o);var s=r.p+r.u(t),a=new Error;r.l(s,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,o,[s,a,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)c(r)}for(t&&t(n);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkChicory=self.webpackChunkChicory||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o={};(()=>{"use strict";r.r(o);var e=r(828),t=r.n(e),n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function s(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}for(var a=[],c=0;c<256;++c)a[c]=(c+256).toString(16).substr(1);const l=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")};const u=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||l(r)};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function y(){y=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),a=new I(i||[]);return r(s,"_invoke",{value:N(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",g="executing",v="completed",m={};function _(){}function w(){}function b(){}var O={};l(O,s,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(P([])));k&&k!==n&&i.call(k,s)&&(O=k);var S=b.prototype=_.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(r,o,s,a){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==d(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return o=o?o.then(r,r):r()}})}function N(t,n,i){var r=p;return function(o,s){if(r===g)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw s;return{value:e,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var c=j(a,i);if(c){if(c===m)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var l=f(t,n,i);if("normal"===l.type){if(r=i.done?v:h,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=v,i.method="throw",i.arg=l.arg)}}}function j(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var o=f(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=b,r(S,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var s=new x(u(e,n,i,r),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(S),l(S,c,"Generator"),l(S,s,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return a.type="throw",a.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;A(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}function _(e,t,n,i,r,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){_(o,i,r,s,a,"next",e)}function a(e){_(o,i,r,s,a,"throw",e)}s(void 0)}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S(i.key),i)}}function E(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:String(t)}var C=window.location.protocol+"//prod-link.chicoryapp.com",x="CHICORY",N=new Date((new Date).toUTCString()).getTime(),j=function(){function e(){b(this,e),this.encountered204s=0,this.lastDisplayedPairingAd=null,this.shouldUseDiverseAds=!1}var n;return E(e,[{key:"configureDiverseAds",value:function(e){this.shouldUseDiverseAds=e}},{key:"assignCurrentPairing",value:function(e){var t=e.find((function(e){return"pairing"===e.placement}));t&&(this.lastDisplayedPairingAd=t)}},{key:"getIdsOfLastPairingAd",value:function(){var e=this.lastDisplayedPairingAd;if(e)return{campaign_id:e.campaign_id,creative_id:e.creative_id};throw new Error("No previous pairing ad is assigned. This method should not be called.")}},{key:"getAds",value:(n=w(y().mark((function e(n){var i,r,o,s,a,c,l,u,d=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>1&&void 0!==d[1]&&d[1],r=d.length>2&&void 0!==d[2]&&d[2],this.shouldUseDiverseAds&&this.lastDisplayedPairingAd&&i&&(o=this.getIdsOfLastPairingAd(),s=o.campaign_id,a=o.creative_id,n.exclude_campaign_id=s,n.exclude_creative_id=a),c=new Request((r?"https://prod-premium.chicoryapp.com/api/v1/ad":"https://prod-ssp.chicoryapp.com/api/v1/ad")+t().query(n),{mode:"cors",credentials:"omit",cache:"no-store"}),e.next=7,fetch(c);case 7:if(204!==(l=e.sent).status){e.next=11;break}return this.encountered204s+=1,e.abrupt("return",[]);case 11:return e.next=13,l.json();case 13:return u=e.sent,this.assignCurrentPairing(u),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}();k(j,"SSP_REQ_RETRY_LIMIT",10);var L=function(){function e(){b(this,e),k(this,"pingTracker",(function(e){var t=document.createElement("template"),n=document.createElement("iframe");document.body.append(t),t.append(n),n.style.width="1px",n.style.height="1px",n.src=e,setTimeout((function(){t.parentNode.removeChild(t)}),1e4)})),this.sspServer=new j,this.original_settings=null,this.settings={},this.device={},this.session=null,this.funnel=null,this.$pairing=null,this.$inlines=[],this.ad_refresh_count=1,this.ad_refresh_timer=null,this.count_204=0,this._device_init_listener=null,this.boundVisibilityChangeListener=null,this.run=this.run.bind(this),this.adData={},this.getDeviceSettings=null,this.initialLoadPerformed=!1,this.frozenSegmentIngredients=[],this.forfeitedPairingSlot=!1,this.FOOD_COM_ID=929,this.FOOD_NETWORK_COM_ID=2987,this.COOKING_CHANNEL_TV_ID=934}var n;return E(e,[{key:"activate",value:function(e,n){var i=this;if(this.original_settings=e,!e.recipes){var r=e.pairing_slot.elements[0];!1===this.forfeitPairingSlot&&r.style.removeProperty("display"),this.getDeviceSettings=n,this.sspServer.configureDiverseAds(e.host.allow_diverse_pairings||!1),this.load(e).then((function(){return i.run(n)})).catch(t().done)}}},{key:"deactivate",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.$pairing&&this.$pairing.remove(),t().each(this.$inlines,(function(e,t){t.remove()})),this.$pairing=null,this.$inlines=[],this.initialLoadPerformed=!1,this.ad_refresh_count=1,this.frozenSegmentIngredients=[],clearTimeout(this.ad_refresh_set_timer)),this.settings={},this.session=null,this.funnel=null,window.removeEventListener("visibilitychange",this.boundVisibilityChangeListener),this.boundVisibilityChangeListener=null}},{key:"load",value:function(e){try{var n=e.page;t().extend(this.settings,e);var i,r={inline_slots:{},pairing_slot:{}},o=this._get_inline_slots(n,this.settings.recipe.ingredient_lines,this.settings.recipe.parser_version);if(r.inline_slots=o,r.pairing_slot={unit_type:"pairing",slot:this._get_pairing_slot(n),targeting:{ingredient:this._get_pairing_ingredients(this.settings.recipe.ingredient_lines),name:this.settings.recipe.name}},r.pairing_slot.slot)null===(i=r.pairing_slot.slot.elements[0])||void 0===i||i.classList.add("chicory-noprint");return this.settings.slots=r,this.boundVisibilityChangeListener=this.visibilityChangeListener.bind(this),Promise.resolve()}catch(e){return Promise.reject(e)}}},{key:"run",value:function(e){var t=this,n=e();null===n?setTimeout((function(){return t.run(e)}),100):(this.device=n.device,this.session=n.session,this.funnel=n.funnel,this.inject().then((function(){t.initialLoadPerformed=!0,t.handle_ad_refresh()})))}},{key:"beforeFirstAdLoad",value:function(){return!1===this.initialLoadPerformed}},{key:"afterFirstAdLoad",value:function(){return!this.beforeFirstAdLoad()}},{key:"forfeitPairingSlot",value:function(){!function(e){window.dispatchEvent(new Event("chicory_no_premium_pairing_ad"));var n,i={recipe_id:e.recipe.id,is_mobile:e.is_mobile,domain:(n=e.recipe.source_uri,new URL(n).hostname)};t().send("premium_pairing_slot_forfeit",i)}(this.settings),this.forfeitedPairingSlot=!0}},{key:"inject",value:function(){var e,n,i,r=this,o=this.settings.slots,s=o.pairing_slot.slot.elements[0],a=this.$pairing,c="relative"===s.style.position,l=this._get_unit_request_payload();if(this.afterFirstAdLoad()&&(!1!==this.settings.premiumOptions.pairingAdsRefresh&&!0!==this.forfeitedPairingSlot||(l.pairing_ads=0),!1===this.settings.premiumOptions.inlineAdsRefresh&&(l.inline_ads=0)),0===l.pairing_ads&&0===l.inline_ads)return this.beforeFirstAdLoad()&&this.forfeitPairingSlot(),Promise.resolve();var u=null===(e=this.original_settings)||void 0===e||null===(n=e.host)||void 0===n||null===(i=n.ab_test_properties)||void 0===i?void 0:i.usePremiumServer;return this.sspServer.getAds(l,this.initialLoadPerformed,u).then((function(e){var n=e.filter((function(e){return"inline"===e.placement})).length;if(0!==e.filter((function(e){return"pairing"===e.placement})).length&&(r.$pairing=null),0!==n&&!1===r.settings.premiumOptions.inlineAdsFreeze&&(t().each(r.$inlines,(function(e,t){t.remove()})),r.$inlines=[]),t().each(e,(function(e,n){if("pairing"===n.placement)try{if(null!==a&&c){var i=a.elements[0];i.style.position="absolute",i.style.left="0px",i.style.top="0px"}r.inject_unit(o.pairing_slot,n)?(r.beforeFirstAdLoad()&&window.dispatchEvent(new Event("chicory_injected_premium_pairing_ad")),s.style.removeProperty("display"),a&&(c?setTimeout((function(){return a.remove()}),500):a.remove())):a&&(r.$pairing=a)}catch(e){t().log(new Error("Chicory: Cannot inject ad creative (ID:".concat(n.creative_id,", LOCATION:").concat(n.placement,"). Error: ").concat(e)))}else if("inline"===n.placement){var l=o.inline_slots[n.segment_alternate_id];if(l){if(!l.is_filled){try{if(r.afterFirstAdLoad()&&!0===r.settings.premiumOptions.inlineAdsFreeze)if(!r.frozenSegmentIngredients.includes(n.segment_alternate_id))return;r.inject_unit(l,n)&&r.beforeFirstAdLoad()&&!0===r.settings.premiumOptions.inlineAdsFreeze&&r.frozenSegmentIngredients.push(n.segment_alternate_id)}catch(e){t().log(new Error("Chicory: Cannot inject ad creative (ID:".concat(n.creative_id,", LOCATION:").concat(n.placement,"). Error: ").concat(e)))}l.is_filled=!0}}else Object.keys(o.inline_slots).length?t().log(new Error("Chicory: Could not find a matching ingredient. Cannot inject ad creative, (ID:".concat(n.creative_id,", LOCATION:").concat(n.placement,")."))):t().log(new Error("Chicory: No inline HTML element slots are detected. Cannot inject ad creative: (ID:".concat(n.creative_id,", LOCATION:").concat(n.placement,").")))}})),r.afterFirstAdLoad()&&!0===r.settings.premiumOptions.inlineAdsFreeze){var i=r.frozenSegmentIngredients.length;if(r.$inlines.length>i){var l=r.$inlines.reduce((function(e,t){var n=t.segment_alternate_id;return e[n]?e[n].push(t):e[n]=[t],e}),{}),u=r.frozenSegmentIngredients.map((function(e){return l[e]?l[e].at(-1):null})).filter((function(e){return null!==e}));r.$inlines.filter((function(e){return!u.includes(e)})).forEach((function(e){return e.remove()})),r.$inlines=u}}null===r.$pairing&&r.beforeFirstAdLoad()&&(r.forfeitPairingSlot(),s.style.display="none")})).catch((function(e){t().log(e)}))}},{key:"_get_unit_request_payload",value:function(){var e=[];t().each(this.settings.recipe.ingredient_lines,(function(t,n){e.push(n.ingredient_id)}));var n=null;"below-ingredient"===this.settings.host.placement?n="inline":"below-ingredients"===this.settings.host.placement&&(n="pairing");var i=this.settings.host.deals;i=i?this.url_encode_deals(i):null;var r=g(this.getAdCount(n,this.settings.host.ad_campaign_limit),2),o=r[0],s=r[1];!1===this.settings.premiumOptions.inlineAdsEnabled&&(s=0),!1===this.settings.premiumOptions.pairingAdsEnabled&&(o=0);var a={pairing_ads:o,inline_ads:s,zip_code:this.settings.zip_code,metro_code:this.settings.dma,city:this.settings.city,geoname_id:this.settings.geoname_id,state:this.settings.state,country:this.settings.country_code,ip:this.settings.ip,device_type:this.settings.is_mobile?"Mobile":"Desktop",publisher_domain:this.settings.recipe?this._get_hostname_from_url(this.settings.recipe.source_uri):null,recipe_url:this.settings.recipe?this.settings.recipe.source_uri:null,user_data:JSON.stringify({user_data:{chicory_user_id:this.device.uuid,external_ids:this.device.external_ids}}),ad_refresh_count:this.ad_refresh_count};return this.settings.latitude&&(a.lat=this.settings.latitude),this.settings.longitude&&(a.long=this.settings.longitude),i&&(a.deals=i),a}},{key:"_get_hostname_from_url",value:function(){var e=document.createElement("a");return e.href=this.settings.recipe.source_uri,e.hostname}},{key:"inject_unit",value:function(e,n){var i,r,o=this;try{r=e.slot.elements[0]}catch(e){return t().log(new Error("Chicory: No ".concat(n.placement," HTML element slot is detected. Cannot inject ad creative, (ID:").concat(n.creative_id,", LOCATION:").concat(n.placement,")."))),!1}var s=t()(n.creative);if(s.elements[0].id=n.creative_id,s.elements[0].id&&document.getElementById(s.elements[0].id))return t().log(new Error("Chicory: already injected.")),!1;var a=r.offsetWidth||300,c=n.width,l=n.height;if(a<c){var d=l/c;c=a,l=a*d,s.elements[0].querySelector("img").setAttribute("style","height: auto !important; width:"+c+"px !important;")}var f="\n      height: ".concat(l,"px !important;\n      width: ").concat(c,"px !important;\n      max-height: ").concat(n.height,"px !important;\n      max-width: ").concat(n.width,"px !important;\n      border: none !important;\n      margin: 0 !important;\n      display: table;\n      text-align: left !important;\n      text-indent: 0 !important;").replace(/\s/g,"");this.settings.host.id===this.FOOD_COM_ID&&"inline"===e.unit_type&&(f+="grid-column-start: 2;"),s.elements[0].setAttribute("style",f),"pairing"===e.unit_type?(s.elements[0].setAttribute("class","chicory-ingredient-pairing"),this.$pairing=s):(s.elements[0].setAttribute("class","chicory-ingredient-inline chicory-noprint"),s.segment_alternate_id=n.segment_alternate_id,this.$inlines.push(s)),r.append(s.elements[0]),a<150&&s.hide();var p=this.settings.recipe?this._get_hostname_from_url(this.settings.recipe.source_uri):null,h={funnel_id:u(),auction_id:n.auction_id,campaign_id:n.campaign_id,creative_id:n.creative_id,line_item_id:n.line_item_id,click_url:n.click_url,ad_campaign_width:n.width,ad_campaign_height:n.height,parent_width:s.parent().width(),parent_height:s.parent().height(),ad_not_shown:!s.viewable().length,placement:n.placement,ad_refresh_count:this.ad_refresh_count,burl:n.burl,domain:p,recipe_id:null===(i=this.settings.recipe)||void 0===i?void 0:i.id,inventory_source:x,segment_key:n.segment_key,segment_alternate_id:n.segment_alternate_id,segment_name:n.segment_name,deal_id:n.deal_id,exchange_auction_id:n.exchange_auction_id,site_id:n.site_id,metadata:{chi_campaign_id:n.campaign_id,chi_creative_id:n.creative_id,chi_exchange_auction_id:n.exchange_auction_id,chi_domain:p,chi_inventory_source:x,chi_line_item_id:n.line_item_id,chi_site_id:n.site_id}};if(s.on("view",(function(e){var i=n.impression_tracker;if(i){for(i="<div>"+i+"</div>";null!==i.match(/\[RANDOM_NUMBER]/g);)i=i.replace(/\[RANDOM_NUMBER]/,Math.random());var r=t()(i);s.after(r.css("display","none"))}var o=n.script_tracker,a=/<script[a-z1-9"'/ =]*?src="(.*?)"/gim;if(o)for(var c;null!==(c=a.exec(o));){c.index===a.lastIndex&&a.lastIndex++;var l=document.createElement("script");l.type="text/javascript",l.src=c[1],t().each(s.elements,(function(e,t){t.appendChild(l)}))}t().send("view_campaign",h)}),{once:!0,threshold:.5}),"html"===n.ad_type){var g=s.elements[0].querySelectorAll("a"),v=Array.from(g).slice(1),m=n.click_list.slice(1);v.forEach((function(e,n){t()(e).on("click",(function(e){e.preventDefault();var t=m[n];o.handleAdClick(t,h)}))}));var y=g[0];t()(y).on("click",(function(e){e.preventDefault();var t=n.click_list[0];o.handleAdClick(t,h)}))}else"image"===n.ad_type&&s.on("click",(function(e){e.preventDefault(),o.handleAdClick(n.click_url,h)}));return t().send("load_campaign",h),!0}},{key:"handleAdClick",value:function(e,n){var i=this,r=e.split("dest=")[1];try{if(!r)throw"decodeURIComponent error";r=decodeURIComponent(r)}catch(e){var o=new Error("decodeURIComponent error");return o.name="Unable to parse dest url",void t().log(o)}r=r.indexOf("http")<0?window.location.protocol+"//"+r:r;var s,a="0",c={},l=!1,u=/;|&/,d=function(e){var t,n=h(e);try{for(n.s();!(t=n.n()).done;){var i,r=h(t.value.split(u));try{for(r.s();!(i=r.n()).done;){var o=g(i.value.split("="),2),s=o[0],l=o[1];s.startsWith("chi_")?c[s]=l:"open_as_modal"===s&&(a=l)}}catch(e){r.e(e)}finally{r.f()}}}catch(e){n.e(e)}finally{n.f()}},f=-1!==r.indexOf("ad.doubleclick.net");if(f&&-1!==r.indexOf("?")){var v=r.split("?");l=-1!==(s=v[1]).indexOf("link.chicoryapp.com"),d(v.slice(2))}else if(f)d([r]);else if(-1!==r.indexOf("link.chicoryapp.com")||-1!==r.indexOf("retailer.chicoryapp.com")){s=r,l=-1!==r.indexOf("link.chicoryapp.com");var m=r.split("?")[1];new URLSearchParams(m).forEach((function(e,t){t.startsWith("chi_")?c[t]=e:"open_as_modal"===t&&(a=e)}))}var y=Object.keys(c).length?c:n.metadata;if(l&&"1"===a){var _=s.split("?")[0].split("/").pop();t().get(C+"/getlink/"+_).then((function(r){i.pingTracker(e),r=p(p(p({},r),n),{},{metadata:y}),t().send("click_campaign",p(p({},n),{},{metadata:y})),r.publisherHref=window.location.host,window.Chicory.shopperselect.default.activate(r)})).catch((function(e){return t().log(e)}))}else{var w=this.generate_redirect_hash(p(p({},n),{},{metadata:y}),e,"click_campaign");window.open("//".concat("e.chicoryapp.com","/api/r?data=").concat(w))}}},{key:"_get_pairing_slot",value:function(){var e=this.settings.pairing_slot,n=t()("div.chicory-peek").viewable();return n.length?n:e}},{key:"_get_pairing_ingredients",value:function(e){var n=[];return t().each(e,(function(e,t){n.push(t.ingredient_id)})),n}},{key:"_get_inline_slots",value:function(e,n,i){var r={},o={},s=this;return t().each(n,(function(n,a){var c=a.text,l=a.ingredient,u=a.ingredient_id;if(c){var d,f=null;[s.FOOD_COM_ID,s.FOOD_NETWORK_COM_ID,s.COOKING_CHANNEL_TV_ID].includes(s.settings.host.id)&&(f="p");try{d=t().fulltext(e.ingredients,c,l,f)}catch(e){return void t().log(new Error("Chicory: fulltext DOM search failed for recipe line: ".concat(a.text)))}d.is_filled=!1;var p={unit_type:"inline",slot:d,targeting:{text:c,ingredient:u}};if(u){var h=u;o[h]||(o[h]=!0,r[h]=p)}if(l&&"V3"==i){var g=l;o[g]||(o[g]=!0,r[g]=p)}}})),r}},{key:"is_serving_ads",value:function(){return(this.$inlines?this.$inlines.length:0)+(this.$pairing?1:0)>0}},{key:"reached_refresh_limit",value:function(){return!(!this.settings.host.ad_refresh_limit||0===this.settings.host.ad_refresh_limit)&&(this.settings.host.ad_refresh_limit>0&&this.ad_refresh_count>=this.settings.host.ad_refresh_limit)}},{key:"isInViewport",value:function(e){return new Promise((function(t,n){window.IntersectionObserver?new(0,window.IntersectionObserver)((function(e,n){t(e[0].isIntersecting),n.disconnect()})).observe(e):n(new Error("IntersectionObserver not available when attempting isInViewport logic."))}))}},{key:"isAnyAdUnitInViewPort",value:(n=w(y().mark((function e(){var n,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],this.$inlines.forEach((function(e){e.elements[0]&&n.push(e.elements[0])})),this.$pairing&&this.$pairing.elements[0]&&n.push(this.$pairing.elements[0]),e.prev=3,e.next=6,Promise.all(n.map(this.isInViewport));case 6:return i=e.sent,e.abrupt("return",i.some((function(e){return!0===e})));case 10:e.prev=10,e.t0=e.catch(3),t().log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return n.apply(this,arguments)})},{key:"refresh_ads",value:function(){this.deactivate(!1),this.activate(this.original_settings,this.getDeviceSettings)}},{key:"ad_refresh_set_timer",value:function(){var e=this;return!1===this.settings.premiumOptions.pairingAdsRefresh&&!1===this.settings.premiumOptions.inlineAdsRefresh||e.reached_refresh_limit()?null:setTimeout((function(){e.is_serving_ads()&&(e.ad_refresh_count+=1);e.isAnyAdUnitInViewPort().then((function(t){t||!e.is_serving_ads()&&e.count_204<=j.SSP_REQ_RETRY_LIMIT?e.refresh_ads():e.ad_refresh_timer=e.ad_refresh_set_timer()}))}),1e3*this.settings.host.ad_refresh_seconds)}},{key:"handle_ad_refresh",value:function(){this.ad_refresh_timer=this.ad_refresh_set_timer(),window.addEventListener("visibilitychange",this.boundVisibilityChangeListener)}},{key:"visibilityChangeListener",value:function(){var e;void 0!==document.hidden?e="hidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),document[e]?clearTimeout(this.ad_refresh_timer):this.ad_refresh_timer=this.ad_refresh_set_timer()}},{key:"generate_redirect_hash",value:function(e,n,i){var r={url:n,is_mobile:this.settings.is_mobile};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);var s=new Date((new Date).toUTCString()).getTime(),a={uuid:this.device.uuid,session_id:this.session.id,funnel_id:e.funnel_id,name:i,recipe_id:this.settings.recipe.id,viewport_height:t()(window.document).height(),viewport_width:t()(window.document).width(),language:window.navigator.language||navigator.userLanguage,encoding:window.document.characterSet||window.document.defaultCharset,url:window.document.location.href,referrer:window.document.referrer,duration:s-(window.performance?window.performance.timing.domContentLoadedEventEnd:N),client_timestamp:s,properties:t().extend({},this.device.properties,this.session.properties,this.funnel.properties,r||{})};delete a.properties.funnel_id;var c=JSON.stringify(a);return btoa(c)}},{key:"getAdCount",value:function(e,t){if(e){if("inline"===e){if(1===t)return[0,1];if(2===t)return[0,2];if(t>=3)return[0,2]}else if("pairing"===e){if(1===t)return[1,0];if(2===t)return[1,0];if(t>=3)return[1,0]}}else{if(1===t)return[1,0];if(2===t)return[1,1];if(t>=3)return[1,2]}}},{key:"url_encode_deals",value:function(e){var t,n=[],i=h(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push(r.join(":"))}}catch(e){i.e(e)}finally{i.f()}return n.join(",")}}]),e}();const A=new L;function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,R(i.key),i)}}function T(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=I(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:String(t)}var D=window.location.protocol+"//chicoryapp.com",$=window.location.protocol+"//e.chicoryapp.com",F=new RegExp($.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),q=document.currentScript,M={"native-ssp":A},H=function(){function e(){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"get_pairing_slot",(function(e){var n="chicory_pairing_slot",i=document.createElement("div"),r=document.getElementById("chicory_premium_pairings_unit");if(r)i=t()(r);else{var o=document.getElementById(n);null!==o&&o.remove(),i.id=n,i.style.minHeight="200px",i.style.minWidth="300px",i.style.overflow="hidden",i.style.position="relative",i.style.display="none",e.ingredients&&e.ingredients.elements&&e.ingredients.elements[0]&&e.ingredients.elements[0].append(i),i=t()(i)}return i})),T(this,"isCustomPairingSlot",(function(e){return"chicory_pairing_slot"!==e.id})),T(this,"resolvePremiumAdOptionsWithOverrides",(function(e,t,i){var r=function(e){return void 0!==e},o=e,s=t;"object"!==I(s)&&(s={desktop:{},mobile:{}}),s.desktop||(s.desktop={}),s.mobile||(s.mobile={});var a=function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r(s[e][t]))return!!s[e][t];var c=o[i];if(!r(c)){var l=n.featureKeyToLegacySetting(t);return r(o[l])?a?!o[l]:o[l]:"inlineAdsFreeze"!==t}return a?!c:c},c=a(i,"pairingAdsEnabled","exclude_from_beeswax_campaigns_".concat(i,"_pairing"),!0),l=a(i,"inlineAdsEnabled","exclude_from_beeswax_campaigns_".concat(i,"_inline"),!0),u=a(i,"pairingAdsRefresh","ad_refresh_active_".concat(i,"_pairing")),d=a(i,"inlineAdsRefresh","ad_refresh_active_".concat(i,"_inline")),f=a(i,"inlineAdsFreeze","inline_ad_freeze_active_".concat(i)),p={pairingAdsEnabled:c,inlineAdsEnabled:l,pairingAdsRefresh:u,inlineAdsRefresh:d,recipeActivationEnabled:a(i,"recipeActivationEnabled","__NO_SERVER_PROPERTY_DEFINED__"),inlineAdsFreeze:f};return r(s.inlineAdsEnabled)&&(p.inlineAdsEnabled=s.inlineAdsEnabled),p})),this.components={},this.settings={},this.current_url="",this.components_has_loaded=!1,this.loadComponentListener=function(){},this.deviceSettings=null,Object.assign&&String.prototype.startsWith&&String.prototype.endsWith&&window.fetch&&window.IntersectionObserver&&window.IntersectionObserverEntry)this.init();else{var i=document.createElement("script");i.type="text/javascript",i.async=!1,i.src="https://polyfill.io/v3/polyfill.min.js?features=Object.assign%2CString.prototype.startsWith%2CString.prototype.endsWith%2Cfetch%2CIntersectionObserver%2CIntersectionObserverEntry",i.onload=function(){n.init()},i.onerror=function(){t().log(new Error("Failed to polyfill needed features"))},document.body.appendChild(i)}}var n,i,o;return n=e,i=[{key:"init",value:function(){var e=this;try{if(navigator.doNotTrack&&"unspecified"!==navigator.doNotTrack||navigator.globalPrivacyControl)return navigator.doNotTrack&&"unspecified"!==navigator.doNotTrack&&this.logOptOut("privacy_dnt"),void(navigator.globalPrivacyControl&&this.logOptOut("privacy_gpc"));this.loading=!1;var n=window.ChicoryObject||"chicory",i=window[n];if(i)console.log("Chicory: running in SDK mode"),t().each(i.q,function(e,t){var n=[].slice.call(t);this[n.shift()].apply(this,n)}.bind(this));else{console.log("Chicory: running in standalone mode");var r=window.location.href,o=t()("meta[property='og:url']");t().is_valid_url(o.attr("content"))&&o.length&&r&&new URL(r).hostname===new URL(o.attr("content")).hostname&&(r=o.attr("content"));var s=t()("link[rel='canonical']");if(t().is_valid_url(s.attr("href"))&&1==s.length&&r&&new URL(r).hostname===new URL(s.attr("href")).hostname&&(r=s.attr("href")),!r)throw Error("Chicory cannot detect the page url.");t().ready((function(){return e.setRecipe(r)}))}window[n]=function(){var e=[].slice.call(arguments);this[e.shift()].apply(this,e)}.bind(this),this.injectCSS()}catch(e){throw t().log(e),e}}},{key:"injectCSS",value:function(){var e=document.createElement("style");e.appendChild(document.createTextNode("@media print {\n      .chicory-noprint { display: none !important; }\n      .chicory-doprint { display: block !important; }\n    }")),document.querySelector("head").appendChild(e)}},{key:"resetComponents",value:function(){t().each(this.components,(function(e,t){t.sdk.deactivate()})),window.removeEventListener("message",this.loadComponentListener)}},{key:"loadComponent",value:function(e){var n=this;return new Promise((function(i,o){if(e.endpoint)t().script(e.endpoint).then((function(){e.sdk=window.Chicory[e.name].default,n.components[e.name]=e,i(e)})).catch(o);else if(e.name in M)e.sdk=M[e.name],n.components[e.name]=e,i(e);else if("print"===e.name){var s=r.p;r.p="https://prod-cdn.chicoryapp.com/chicory-publisher-sdk/",r.e(889).then(r.bind(r,925)).then((function(t){var o=t.default;e.sdk=o,n.components.print=e,i(e),r.p=s}))}else o(new Error("Cannot handle ".concat(e.name)))}))}},{key:"injectPixels",value:function(){window._qevents=window._qevents||[];var e=document.createElement("script");e.src=("https:"===document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",e.async=!0,e.type="text/javascript";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window._qevents.push({qacct:"p-5BE5Fp6_qyVGp",uid:"__INSERT_EMAIL_HERE__"})}},{key:"setRecipe",value:function(e){var n=this;if(this.current_url!==e){var i=this;try{if(this.loading)return;if(this.loading=!0,this.resetComponents(),!e)return void(this.loading=!1);var r=t().getPageStructure();r.recipe.length||r.ingredients.length?r.recipe.length&&!r.ingredients.length&&t().log(new Error("Chicory: Cannot find ingredient list element")):t().log(new Error("Chicory: Cannot detect HTML recipe structure"));var o=this.get_pairing_slot(r),s=t().extend({url:e},t().params(q.src));t().get(D+"/api/chicory",s).then((function(s){var a=localStorage.getItem("zip_code");a&&"null"!==a&&"undefined"!==a&&(s.settings.zip_code=a);var c=localStorage.getItem("country_code");c&&"null"!==c&&"undefined"!==c&&(s.settings.country_code=c),s.settings.premiumOptions=n.resolvePremiumAdOptionsWithOverrides(s.settings.host,window.ChicoryConfig||{},s.settings.is_mobile?"mobile":"desktop"),s.ready?(window.chicory_components=[],t().each(s.components,(function(i,r){if("analytics"===r.name)if(n.components_has_loaded){var o=new URL(e).hostname;window.postMessage(JSON.stringify({caller:"chicory_iba_enabled"}),window.location.protocol+"//"+o)}else n.loadComponent(r).then((function(e){e.sdk.activate(s.settings)})).catch(t().done);else window.chicory_components.push(r)})),n.loadComponentListener=function(e){try{var a=JSON.parse(e.data);if("chicory_iba_enabled"===a.caller)n.injectPixels(),window.chicory_components.forEach((function(e){n.loadComponent(e).then((function(e){if("ecommerce"===e.name||"ecommerceabtest"===e.name){var a=document.getElementsByClassName("chicory-no-button").length>0;"undefined"!=typeof CHICORY_NO_BUTTON&&(a=CHICORY_NO_BUTTON),a||!0!==s.settings.premiumOptions.recipeActivationEnabled||e.sdk.activate(i.getEcommerceSettings(s),(function(){return n.getDeviceSettings()}))}else if("native"===e.name||"native-ssp"===e.name){var c=document.getElementsByClassName("chicory-no-ads").length>0,l=null;"undefined"!=typeof CHICORY_NO_ADS&&(l=CHICORY_NO_ADS);var u=s.settings.host.ad_campaign_limit,d=s.settings.premiumOptions.pairingAdsEnabled||s.settings.premiumOptions.inlineAdsEnabled;if(!c&&!l&&u>0&&d)e.sdk.activate(t().extend(s.settings,{page:r,pairing_slot:o}),(function(){return n.getDeviceSettings()})),n.loadComponent({name:"shopperselect",endpoint:D+"/sdk/shopperselect.js"});else{var f=o.elements?o.elements[0]:o;f&&!n.isCustomPairingSlot(f)&&(f.style.display="none")}}else e.sdk.activate(s.settings,(function(){return n.getDeviceSettings()}))})).catch(t().done),n.components_has_loaded=!0}));else if("chicory_iba_disabled"===a.caller)return void n.logOptOut("privacy_cookie")}catch(e){}},window.addEventListener("message",n.loadComponentListener),window.addEventListener("message",(function(e){if(null===n.deviceSettings){var i=F;if(e.origin.match(i))try{var r=JSON.parse(e.data);"init"===r.caller&&(n.deviceSettings=r.data)}catch(e){t().log(e)}}})),t().send("load_recipe",s.settings),n.current_url=e,n.loading=!1):n.loading=!1})).catch(t().done)}catch(e){t().log(e)}}}},{key:"setShopperSelect",value:function(e){try{var n=this;n.analytics={endpoint:D+"/sdk/analytics.js",name:"analytics"},this.loadComponent(this.analytics).then((function(e){t().extend({recipe:{},host:{}},n.settings),e.sdk.activate({recipe:{id:0,servings:0},host:{}})})).catch(t().done),n.shopperselect={endpoint:D+"/sdk/shopperselect.js",name:"shopperselect"},this.loadComponent(this.shopperselect).then((function(i){t().extend({recipe:{},host:{}},n.settings),0===Object.keys(e.metadata).length&&(e.metadata.chi_site_id="direct-navigation"),i.sdk.activate(e)})).catch(t().done)}catch(e){t().log(e)}}},{key:"setOption",value:function(e,t){this.settings[e]=t}},{key:"getEcommerceSettings",value:function(e){var n=[];t().each(e.settings.recipe.ingredient_lines,(function(e,t){n.push({text:t.text,ingredient:{name:t.ingredient+""},productSpecs:[{searchQuery:t.search_query,priority:0}]})}));var i=[];return"company"in e.settings.host&&e.settings.host.company&&"brands"in e.settings.host.company&&(i=e.settings.host.company.brands),{recipe:{id:e.settings.recipe.id,name:e.settings.recipe.name,source_uri:e.settings.recipe.source_uri,source_image_uri:e.settings.recipe.source_image_uri,servings:e.settings.recipe.servings,is_mobile:e.settings.recipe.is_mobile,ingredient_lines:e.settings.recipe.ingredient_lines},host:e.settings.host,cart:{options:{retailer:{},blacklistedBrands:e.settings.host.brand_blacklist,blacklistedRetailers:e.settings.host.grocer_blacklist,preferredBrands:i,affiliateKeys:e.settings.affiliate_keys},items:n,analytics:{recipe_id:e.settings.recipe.id,zip_code:e.settings.zip_code,event:window.location.href.includes("chicory-get-ingredients=true")?"referred_ra_grocer_redirect":"ra_grocer_redirect",oauth_event:"ra_retailer_oauth",is_mobile:e.settings.is_mobile+""}},is_mobile:e.settings.is_mobile,country_code:e.settings.country_code,new_funnel:e.settings.new_funnel,zip_code:e.settings.zip_code,userLongitude:e.settings.longitude,userLatitude:e.settings.latitude}}},{key:"logOptOut",value:function(e){var n={name:e,uuid:"",client_timestamp:new Date((new Date).toUTCString()).getTime()};t().post($+"/api/privacy-event",JSON.stringify(n))}},{key:"getDeviceSettings",value:function(){return this.deviceSettings}},{key:"featureKeyToLegacySetting",value:function(e){return"pairingAdsEnabled"===e||"inlineAdsEnabled"===e?"exclude_from_beeswax_campaigns":"pairingAdsRefresh"===e||"inlineAdsRefresh"===e?"ad_refresh_active":void 0}}],i&&P(n.prototype,i),o&&P(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();window.__CHICORY__||(window.__CHICORY__=new H)})(),(this.Chicory=this.Chicory||{})["wrapper.full"]=o})();